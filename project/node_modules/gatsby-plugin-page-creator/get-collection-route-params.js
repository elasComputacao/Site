"use strict";

exports.__esModule = true;
exports.getCollectionRouteParams = getCollectionRouteParams;

var _pathUtils = require("./path-utils");

// This extracts params from its filePath counerpart
// and returns an object of it's matches.
// e.g.,
//   /foo/{Product.id}, /foo/123 => {id: 123}
function getCollectionRouteParams(urlTemplate, urlPath) {
  var params = {}; // remove the starting path to simplify the loop

  var urlTemplateParts = urlTemplate.split("/");
  var urlParts = urlPath.split("/");
  urlTemplateParts.forEach(function (part, i) {
    if (!part.startsWith("{")) return;
    var key = (0, _pathUtils.compose)(_pathUtils.removeFileExtension, _pathUtils.extractFieldWithoutUnion)(part);
    params[key] = urlParts[i];
  });
  return params;
}